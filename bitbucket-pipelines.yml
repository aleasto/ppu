# This is a sample build configuration for Python.
# Check our guides at https://confluence.atlassian.com/x/x4UWN for more examples.
# Only use spaces to indent your .yml configuration.
# -----
# You can specify a custom docker image from Docker Hub as your build environment.
image: python:3.7.3

pipelines:
  default:
    - step:
        script: # Modify the commands below to build your repository.
          - sudo apt update
          - sudo apt-get install -y build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev xz-utils tk-dev libffi-dev liblzma-dev python-openssl git unzip
          - git clone https://github.com/pyenv/pyenv.git ~/.pyenv
          - echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bashrc
          - echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bashrc
          - echo -e 'if command -v pyenv 1>/dev/null 2>&1; then\n eval "$(pyenv init --path)"\nfi' >> ~/.bashrc
          - exec $SHELL
          - source .bashrc
          - pyenv install 3.10.0
          - pyenv global 3.10.0
          - pip install maturin
          - curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
          - source $HOME/.cargo/env
          - curl -X POST "https://${BITBUCKET_USERNAME}:${BITBUCKET_APP_PASSWORD}@api.bitbucket.org/2.0/repositories/${BITBUCKET_REPO_OWNER}/${BITBUCKET_REPO_SLUG}/downloads" --form files=@"rv_posit_quickins.h" --form files=@"encoding.h"



